{% extends "base.html" %}

{% block title %}Graph{% endblock %}

{% block content %}
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.js"></script> -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js'></script>
    <style>
        body {
            background-color: lightblue;
        }
        .graph {
            margin-top: 20px;
        }
    </style>
    <div class="graph">
      <!-- maybe change height and width of histogram -->
        <canvas id="histogram" width="1350" height="800"></canvas>
        <script>
          var ctx = document.getElementById("histogram").getContext("2d");
          var lineChart = new Chart(ctx, {
            type: "bar",
            data: {
              labels: {{ labels | safe}},
              datasets: [{
                label: "Testing: {{ ylabel }}",
                backgroundColor: 'rgb(45,45,45)',
                borderColor: 'rgb(45,45,45)',
                borderWidth: 3,
                data: {{ values | safe}},
              }]
            },

            options: {
              scales: {
                xAxes: [{
                  display: false,
                  barPercentage: 1.3,
                  ticks: {
                    max: 3,
                  }
                }, {
                  display: true,
                  ticks: {
                    autoSkip: false,
                    max: 4,
                  }
                }]
                yAxes: [{
                  ticks: {
                    beginAtZero: true
                  }
                }]
              }
            }

          });

          // Code for Line graph:
          //   data: {
          //       labels: {{ labels | safe}},
          //       datasets: [{
          //           label: "Testing: {{ ylabel }}",
          //           backgroundColor: 'rgb(45,45,45)',
          //           borderColor: 'rgb(45,45,45)',
          //           borderWidth: 3,
          //           data: {{ values | safe}},
          //       }]
          //   },
          //   options: {
          //       responsive: false,
          //       plugins: {
          //         title: {
          //           display: true,
          //           text: '{{ graph_title }}'
          //         }
          //       }
          //   }
          // });
        </script>
      </div>
      <div class="selectform">
        <form>
          <label>Input Feature</label>
          <select id="xlist"></select>
          <label>Output</label>
          <select id="ylist"></select>
          <button>Test feature</button>

          <script>
            var str = ''
            var X = {{ xlabels | safe}}
            X.forEach(function(x) {
              str += '<option>'+ x + '</option>';
            });
            document.getElementById("xlist").innerHTML = str;

            str = ''
            var Y = {{ ylabels | safe}}
            Y.forEach(function(y) {
              str += '<option>'+ y + '</option>';
            });
            document.getElementById("ylist").innerHTML = str;
          </script>
        </form>
      </div>
{% endblock %}
